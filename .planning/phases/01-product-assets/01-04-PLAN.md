---
phase: 01-product-assets
plan: "04"
type: execute
wave: 3
depends_on: ["01-01", "01-03"]
files_modified:
  - downloads/ai-prompt-kit-full.pdf
  - downloads/ai-prompt-kit-starter.pdf
  - downloads/5-ai-prompts-lead-magnet.pdf
  - downloads/pdf-style.css
  - downloads/asset-manifest.md
autonomous: true

must_haves:
  truths:
    - "downloads/ai-prompt-kit-full.pdf exists as a real PDF file with non-trivial size (>100KB)"
    - "downloads/ai-prompt-kit-starter.pdf exists as a real PDF file with non-trivial size (>50KB)"
    - "downloads/5-ai-prompts-lead-magnet.pdf exists as a real PDF file with non-trivial size (>20KB)"
    - "All three PDFs open correctly and render the content from their source .md files"
    - "The asset manifest reflects the PDFs as generated (not pending Canva export)"
  artifacts:
    - path: "downloads/ai-prompt-kit-full.pdf"
      provides: "Full Kit product file — 500+ prompts formatted as downloadable PDF"
    - path: "downloads/ai-prompt-kit-starter.pdf"
      provides: "Starter tier product file — 200 prompts formatted as downloadable PDF"
    - path: "downloads/5-ai-prompts-lead-magnet.pdf"
      provides: "Lead magnet — 5 prompts formatted as downloadable PDF"
    - path: "downloads/pdf-style.css"
      provides: "CSS stylesheet controlling PDF typographic layout"
    - path: "downloads/asset-manifest.md"
      provides: "Updated asset manifest reflecting programmatic PDF generation"
  key_links:
    - from: "downloads/ai-prompt-kit-full-content.md"
      to: "downloads/ai-prompt-kit-full.pdf"
      via: "md-to-pdf conversion with pdf-style.css"
      pattern: "npx md-to-pdf"
    - from: "downloads/ai-prompt-kit-starter-content.md"
      to: "downloads/ai-prompt-kit-starter.pdf"
      via: "md-to-pdf conversion with pdf-style.css"
      pattern: "npx md-to-pdf"
    - from: "downloads/lead-magnet-content.md"
      to: "downloads/5-ai-prompts-lead-magnet.pdf"
      via: "md-to-pdf conversion with pdf-style.css"
      pattern: "npx md-to-pdf"
---

<objective>
Convert the three Markdown content files produced in Plans 01 and 03 into professionally styled, downloadable PDF files using md-to-pdf (runs via npx — no global install required). Update the asset manifest to reflect that PDFs are ready.

Purpose: Phase 1's success criteria require actual .pdf files in the downloads/ directory. Plans 01–03 produce .md content files only. This plan closes that gap so Phase 2 (Cloudflare Pages hosting) and Phase 3 (email download links) receive real PDF files, not placeholders.

Output:
- `downloads/ai-prompt-kit-full.pdf` — Full Kit, 500+ prompts
- `downloads/ai-prompt-kit-starter.pdf` — Starter tier, 200 prompts
- `downloads/5-ai-prompts-lead-magnet.pdf` — Lead magnet, 5 prompts
- `downloads/pdf-style.css` — Shared CSS for all three PDFs
- `downloads/asset-manifest.md` — Updated: PDF File Status rows marked as generated
</objective>

<execution_context>
@/Users/wilfredshammah/.claude/get-shit-done/workflows/execute-plan.md
@/Users/wilfredshammah/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-product-assets/01-01-SUMMARY.md
@.planning/phases/01-product-assets/01-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PDF stylesheet and convert all three content files to PDF</name>
  <files>
    downloads/pdf-style.css
    downloads/ai-prompt-kit-full.pdf
    downloads/ai-prompt-kit-starter.pdf
    downloads/5-ai-prompts-lead-magnet.pdf
  </files>
  <action>
Create a shared CSS stylesheet, then use `npx md-to-pdf` to generate all three PDFs. md-to-pdf uses puppeteer internally and requires no system PDF tools — only npm (which is present at /opt/homebrew/bin/npm).

**Step 1 — Create `downloads/pdf-style.css`:**

Write this file with the following content:

```css
/* ContentKit AI — PDF Stylesheet */

@page {
  size: A4;
  margin: 2.2cm 2.5cm 2.2cm 2.5cm;
}

body {
  font-family: 'Georgia', 'Times New Roman', serif;
  font-size: 11pt;
  line-height: 1.65;
  color: #1a1a1a;
  max-width: 100%;
}

h1 {
  font-family: 'Arial', 'Helvetica Neue', sans-serif;
  font-size: 22pt;
  font-weight: 700;
  color: #111111;
  margin-top: 0;
  margin-bottom: 0.4em;
  page-break-after: avoid;
}

h2 {
  font-family: 'Arial', 'Helvetica Neue', sans-serif;
  font-size: 15pt;
  font-weight: 700;
  color: #1a1a1a;
  margin-top: 2em;
  margin-bottom: 0.5em;
  padding-bottom: 0.2em;
  border-bottom: 2px solid #e0e0e0;
  page-break-after: avoid;
}

h3 {
  font-family: 'Arial', 'Helvetica Neue', sans-serif;
  font-size: 12pt;
  font-weight: 700;
  color: #2a2a2a;
  margin-top: 1.6em;
  margin-bottom: 0.3em;
  page-break-after: avoid;
}

h4 {
  font-family: 'Arial', 'Helvetica Neue', sans-serif;
  font-size: 11pt;
  font-weight: 700;
  color: #333333;
  margin-top: 1em;
  margin-bottom: 0.25em;
  page-break-after: avoid;
}

p {
  margin: 0.5em 0 0.8em 0;
  orphans: 3;
  widows: 3;
}

/* Prompt blocks rendered as blockquotes */
blockquote {
  background-color: #f7f7f7;
  border-left: 4px solid #555555;
  margin: 1em 0;
  padding: 0.8em 1.2em;
  font-family: 'Courier New', Courier, monospace;
  font-size: 9.5pt;
  line-height: 1.55;
  color: #222222;
  page-break-inside: avoid;
}

/* Inline code */
code {
  font-family: 'Courier New', Courier, monospace;
  font-size: 9pt;
  background-color: #f2f2f2;
  padding: 0.1em 0.3em;
  border-radius: 2px;
  color: #333333;
}

/* Code fences */
pre {
  background-color: #f4f4f4;
  border: 1px solid #ddd;
  padding: 0.8em 1em;
  font-size: 9pt;
  line-height: 1.5;
  overflow-wrap: break-word;
  white-space: pre-wrap;
  page-break-inside: avoid;
}

pre code {
  background: none;
  padding: 0;
}

ul, ol {
  margin: 0.4em 0 0.8em 0;
  padding-left: 1.6em;
}

li {
  margin-bottom: 0.3em;
}

strong {
  font-weight: 700;
  color: #111111;
}

em {
  font-style: italic;
}

hr {
  border: none;
  border-top: 1px solid #cccccc;
  margin: 1.8em 0;
}

table {
  width: 100%;
  border-collapse: collapse;
  font-size: 10pt;
  margin: 1em 0;
  page-break-inside: avoid;
}

th {
  background-color: #e8e8e8;
  font-weight: 700;
  padding: 0.4em 0.6em;
  border: 1px solid #bbbbbb;
  text-align: left;
}

td {
  padding: 0.35em 0.6em;
  border: 1px solid #cccccc;
  vertical-align: top;
}

tr:nth-child(even) td {
  background-color: #fafafa;
}

/* Page break helpers */
.page-break {
  page-break-after: always;
}

/* Ensure H3 prompt entries don't orphan from their body */
h3 + p, h3 + blockquote {
  page-break-before: avoid;
}
```

**Step 2 — Generate the three PDFs using npx:**

Run these three commands in sequence. Each takes the source .md file, applies the CSS, and outputs a .pdf file into the downloads/ directory. The `--config` options control pdf output path explicitly.

```bash
# Full Kit (large file — may take 60-90 seconds)
npx --yes md-to-pdf \
  --stylesheet downloads/pdf-style.css \
  --config-file /dev/null \
  downloads/ai-prompt-kit-full-content.md

# Rename the output to the expected filename
mv downloads/ai-prompt-kit-full-content.pdf downloads/ai-prompt-kit-full.pdf

# Starter Kit
npx --yes md-to-pdf \
  --stylesheet downloads/pdf-style.css \
  --config-file /dev/null \
  downloads/ai-prompt-kit-starter-content.md

mv downloads/ai-prompt-kit-starter-content.pdf downloads/ai-prompt-kit-starter.pdf

# Lead Magnet
npx --yes md-to-pdf \
  --stylesheet downloads/pdf-style.css \
  --config-file /dev/null \
  downloads/lead-magnet-content.md

mv downloads/lead-magnet-content.pdf downloads/5-ai-prompts-lead-magnet.pdf
```

**If npx md-to-pdf fails** (e.g., puppeteer download times out on first run), fall back to this approach:

Install globally first, then run:
```bash
npm install -g md-to-pdf

md-to-pdf --stylesheet downloads/pdf-style.css downloads/ai-prompt-kit-full-content.md
mv downloads/ai-prompt-kit-full-content.pdf downloads/ai-prompt-kit-full.pdf

md-to-pdf --stylesheet downloads/pdf-style.css downloads/ai-prompt-kit-starter-content.md
mv downloads/ai-prompt-kit-starter-content.pdf downloads/ai-prompt-kit-starter.pdf

md-to-pdf --stylesheet downloads/pdf-style.css downloads/lead-magnet-content.md
mv downloads/lead-magnet-content.pdf downloads/5-ai-prompts-lead-magnet.pdf
```

**If md-to-pdf is unavailable entirely** (npm fails), fall back to generating styled HTML files instead and add a `checkpoint:human-action` requesting the user open each HTML in a browser and use File → Print → Save as PDF. In that case, create:
- `downloads/ai-prompt-kit-full.html`
- `downloads/ai-prompt-kit-starter.html`
- `downloads/5-ai-prompts-lead-magnet.html`

Each HTML file: wrap the rendered markdown content in a `<!DOCTYPE html>` page with `<link rel="stylesheet" href="pdf-style.css">` and a `@media print` block ensuring no header/footer from browser chrome.
  </action>
  <verify>
```bash
# Confirm all three PDF files exist and have substantial size
ls -lh /Users/wilfredshammah/Desktop/dp/downloads/*.pdf

# Full Kit should be large (500+ prompts)
[ $(wc -c < /Users/wilfredshammah/Desktop/dp/downloads/ai-prompt-kit-full.pdf) -gt 100000 ] && echo "PASS: full kit >100KB" || echo "FAIL: full kit too small"

# Starter should be smaller but still substantial
[ $(wc -c < /Users/wilfredshammah/Desktop/dp/downloads/ai-prompt-kit-starter.pdf) -gt 50000 ] && echo "PASS: starter >50KB" || echo "FAIL: starter too small"

# Lead magnet
[ $(wc -c < /Users/wilfredshammah/Desktop/dp/downloads/5-ai-prompts-lead-magnet.pdf) -gt 20000 ] && echo "PASS: lead magnet >20KB" || echo "FAIL: lead magnet too small"

# Confirm they are real PDFs (magic bytes)
file /Users/wilfredshammah/Desktop/dp/downloads/ai-prompt-kit-full.pdf
file /Users/wilfredshammah/Desktop/dp/downloads/ai-prompt-kit-starter.pdf
file /Users/wilfredshammah/Desktop/dp/downloads/5-ai-prompts-lead-magnet.pdf
```

All three `file` commands must return `PDF document`. All three size checks must PASS.
  </verify>
  <done>
Three .pdf files exist in downloads/ with correct filenames:
- downloads/ai-prompt-kit-full.pdf (>100KB, verified PDF)
- downloads/ai-prompt-kit-starter.pdf (>50KB, verified PDF)
- downloads/5-ai-prompts-lead-magnet.pdf (>20KB, verified PDF)

downloads/pdf-style.css exists with the A4 @page rule and all typographic styles.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update asset manifest to reflect PDFs as generated</name>
  <files>downloads/asset-manifest.md</files>
  <action>
Read `downloads/asset-manifest.md` (produced by Plan 03, Task 2). Find the PDF Assets table — it currently has a "File Status" column with rows marked `[ ] Designed in Canva`. Update those rows to reflect that PDFs are programmatically generated and ready.

**Find this table in asset-manifest.md:**

```markdown
| Asset | Local File Path | Live URL (after Phase 2 deploy) | File Status |
|-------|----------------|--------------------------------|-------------|
| Full Kit PDF | downloads/ai-prompt-kit-full.pdf | https://yourdomain.com/downloads/ai-prompt-kit-full.pdf | [ ] Designed in Canva |
| Starter Kit PDF | downloads/ai-prompt-kit-starter.pdf | https://yourdomain.com/downloads/ai-prompt-kit-starter.pdf | [ ] Designed in Canva |
| Lead Magnet PDF | downloads/5-ai-prompts-lead-magnet.pdf | https://yourdomain.com/downloads/5-ai-prompts-lead-magnet.pdf | [ ] Designed in Canva |
```

**Replace the File Status column values with:**
- `[x] Generated — md-to-pdf (Plan 01-04)`

Also find the Note below the table that says "PDF design (Canva layout) is a separate post-Phase-1 task" and replace it with:

```
Note: PDFs were generated programmatically from content .md files using md-to-pdf (Plan 01-04).
Files are in downloads/ and ready to commit to the repo for Cloudflare Pages hosting.
```

Do not modify any other part of the asset manifest.
  </action>
  <verify>
```bash
# Confirm the Canva placeholder text is gone
grep "Designed in Canva" /Users/wilfredshammah/Desktop/dp/downloads/asset-manifest.md && echo "FAIL: old placeholder still present" || echo "PASS: placeholder removed"

# Confirm the generated status is present
grep "Generated — md-to-pdf" /Users/wilfredshammah/Desktop/dp/downloads/asset-manifest.md && echo "PASS: status updated" || echo "FAIL: status not found"

# Confirm the three PDF paths are still present
grep "ai-prompt-kit-full.pdf" /Users/wilfredshammah/Desktop/dp/downloads/asset-manifest.md
grep "ai-prompt-kit-starter.pdf" /Users/wilfredshammah/Desktop/dp/downloads/asset-manifest.md
grep "5-ai-prompts-lead-magnet.pdf" /Users/wilfredshammah/Desktop/dp/downloads/asset-manifest.md
```

No "Designed in Canva" text must remain. "Generated — md-to-pdf" must appear. All three PDF paths must still be present.
  </verify>
  <done>
downloads/asset-manifest.md has been updated:
- File Status for all three PDFs changed from "[ ] Designed in Canva" to "[x] Generated — md-to-pdf (Plan 01-04)"
- Canva note replaced with programmatic generation note
- All other manifest content unchanged
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `ls -lh downloads/*.pdf` shows all three files with human-readable sizes (expect Full Kit ~1-5MB, Starter ~500KB-2MB, Lead Magnet ~100-400KB)
2. `file downloads/*.pdf` reports all three as PDF documents
3. `grep "Designed in Canva" downloads/asset-manifest.md` returns no matches
4. Open one PDF (e.g., `open downloads/5-ai-prompts-lead-magnet.pdf`) — confirm it renders readable content with styled headings and prompt blocks
</verification>

<success_criteria>
- All three .pdf files exist in downloads/ and are valid PDFs (not corrupt, not empty)
- File sizes indicate real content was rendered (Full Kit largest, lead magnet smallest)
- Asset manifest updated: "Designed in Canva" status replaced with generated status
- Phase 1 success criteria 1 and 4 are now met: PDF prompt pack exists ready to attach to email or host as download
</success_criteria>

<output>
After completion, create `.planning/phases/01-product-assets/01-04-SUMMARY.md` following the summary template. Record the actual file sizes of the three generated PDFs in the summary.
</output>
</invoke>