---
phase: 04-front-end-build
plan: "04"
type: execute
wave: 2
depends_on: ["01", "02", "03"]
files_modified:
  - output.css
  - og-image.png
autonomous: false

must_haves:
  truths:
    - "output.css is recompiled with all new Tailwind classes from plans 04-01, 04-02, and 04-03"
    - "og-image.png exists at project root (1200x630px) and is referenced by OG meta tag in index.html"
    - "All pages render correctly in browser after CSS recompile"
    - "No visual regressions on mobile viewport (375px)"
    - "PageSpeed Insights mobile LCP confirmed under 2 seconds"
    - "After completing Stripe checkout, buyer is redirected to https://getcontentkit.com/thank-you.html"
  artifacts:
    - path: "output.css"
      provides: "Recompiled Tailwind CSS with all new utility classes"
    - path: "og-image.png"
      provides: "Open Graph social sharing image (1200x630px)"
  key_links:
    - from: "index.html"
      to: "output.css"
      via: "link rel=stylesheet"
      pattern: "output\\.css"
    - from: "index.html og:image meta tag"
      to: "og-image.png"
      via: "absolute URL"
      pattern: "og-image\\.png"

user_setup:
  - service: stripe
    why: "Post-purchase redirect configuration"
    dashboard_config:
      - task: "Configure redirect URL for Starter Payment Link"
        location: "Stripe Dashboard > Payment Links > Starter ($27) > Edit > After the payment > Redirect to https://getcontentkit.com/thank-you.html"
      - task: "Configure redirect URL for Full Kit Payment Link"
        location: "Stripe Dashboard > Payment Links > Full Kit ($47) > Edit > After the payment > Redirect to https://getcontentkit.com/thank-you.html"
---

<objective>
Recompile Tailwind CSS to include all new utility classes added across plans 04-01/02/03, create the OG social sharing image, and verify the complete front-end build across all pages.

Purpose: This is the quality gate for Phase 4. Without recompiling CSS, new Tailwind classes from the added sections will not render. Without the OG image, social sharing will show no preview. The Stripe dashboard redirect config is the final piece connecting purchase to thank-you page.

Output: Updated `output.css`, `og-image.png`, and a verified complete front-end.
</objective>

<execution_context>
@/Users/wilfredshammah/.claude/get-shit-done/workflows/execute-plan.md
@/Users/wilfredshammah/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-front-end-build/04-RESEARCH.md
@.planning/phases/04-front-end-build/04-01-SUMMARY.md
@.planning/phases/04-front-end-build/04-02-SUMMARY.md
@.planning/phases/04-front-end-build/04-03-SUMMARY.md
@index.html
@thank-you.html
@src/input.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Recompile Tailwind CSS and create OG image</name>
  <files>output.css, og-image.png</files>
  <action>
**1. Recompile Tailwind CSS:**
Run the Tailwind standalone CLI to rebuild output.css with all new classes:
```bash
./tailwindcss -i src/input.css -o output.css --minify
```

If the `tailwindcss` binary is not present in the project root (check first with `ls -la ./tailwindcss`), download it:
```bash
curl -sLO https://github.com/tailwindlabs/tailwindcss/releases/latest/download/tailwindcss-macos-arm64
chmod +x tailwindcss-macos-arm64
mv tailwindcss-macos-arm64 tailwindcss
./tailwindcss -i src/input.css -o output.css --minify
```

Verify the compiled CSS is larger than the previous version (was 22KB, should be slightly larger with new classes like `font-mono`, `tracking-widest`, `mt-0.5` from new sections).

**2. Create OG image (1200x630px):**
Create a simple but effective OG image using an HTML-to-image approach. Create a temporary HTML file (`_og-temp.html`) with:
- 1200x630px fixed dimensions
- Dark background matching dark-900 (#18181b or equivalent)
- "ContentKit AI" logo text with gradient
- "500+ AI Marketing Prompts & Templates" headline
- "One-time $47. Works with ChatGPT, Claude, and any AI." subtitle
- Simple, clean layout centered on the canvas

Then use a headless browser or screenshot tool to capture it:

Option A (preferred — uses existing puppeteer from md-to-pdf if available):
```bash
npx --yes puppeteer screenshot _og-temp.html --width 1200 --height 630 --output og-image.png
```

Option B (if puppeteer not available):
Create a simple 1200x630 PNG using ImageMagick if available:
```bash
convert -size 1200x630 xc:'#0f0f11' -fill white -font Helvetica-Bold -pointsize 64 -gravity center -annotate +0-80 'ContentKit AI' -pointsize 36 -fill '#9ca3af' -annotate +0+20 '500+ AI Marketing Prompts & Templates' -pointsize 24 -annotate +0+80 'One-time $47 | Works with ChatGPT, Claude, any AI' og-image.png
```

Option C (minimal fallback — create a solid-color placeholder):
If neither tool is available, create a minimal placeholder and note it needs manual replacement. Use Python to create a PNG:
```python
# Creates a basic 1200x630 PNG with text
```

After creating, verify the file:
```bash
file og-image.png  # Should report PNG image data, 1200 x 630
```

Clean up temporary files (`_og-temp.html` if created).
  </action>
  <verify>
Verify output.css:
- `ls -la output.css` — file exists and has recent modification time
- File size is >= 22KB (original was 22KB, should be equal or larger)

Verify og-image.png:
- `file og-image.png` — reports PNG image data
- File exists at project root

Open index.html in browser:
- All sections render with correct styling (no unstyled elements)
- Sample prompt preview section has monospace font
- "Who This Is NOT For" section has red X marks
- Legal pages load with correct styling
  </verify>
  <done>output.css is recompiled with all new Tailwind classes. og-image.png exists at 1200x630px for social sharing.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Verify complete front-end build and configure Stripe redirects</name>
  <files>index.html, thank-you.html, privacy-policy.html, terms-of-service.html, refund-policy.html</files>
  <action>
Human verification of the complete front-end build and Stripe dashboard redirect configuration.

What was built:
- index.html with all 14 sections, live Stripe buy buttons, OG meta tags, non-blocking fonts
- thank-you.html with purchase confirmation and download instructions
- Three legal pages (privacy, terms, refund) linked from footer
- Recompiled output.css with all new Tailwind classes
- og-image.png for social sharing

Manual verification steps:

1. Open https://getcontentkit.com/ (after git push) — Verify all sections visible:
   Hero, Social proof, Problem/Solution, What's Inside (9 cards), Sample Prompt Preview (NEW), Testimonials, Lead Magnet opt-in, Pricing (2 tiers), FAQ (5 items), Who This Is NOT For (NEW), Final CTA, Footer with Terms/Privacy/Refunds/Contact

2. Click "Get Starter Kit" button — Should open Stripe checkout for $27
3. Click "Get Full Kit" button — Should open Stripe checkout for $47
4. Click footer Terms/Privacy/Refunds links — Should open respective pages
5. Test on mobile — Open on phone or browser DevTools at 375px width

6. REQUIRED: Configure Stripe redirect (cannot be automated):
   - Stripe Dashboard > Payment Links > Starter ($27) > Edit > After the payment > Redirect to: https://getcontentkit.com/thank-you.html > Save
   - Stripe Dashboard > Payment Links > Full Kit ($47) > Edit > After the payment > Redirect to: https://getcontentkit.com/thank-you.html > Save

7. REQUIRED: Run PageSpeed Insights (https://pagespeed.web.dev) against https://getcontentkit.com/ — confirm mobile LCP < 2.0s. If LCP >= 2s, self-host Inter WOFF2 files instead of Google Fonts CDN.

8. REQUIRED: Test a purchase — Complete a Stripe checkout and verify redirect to https://getcontentkit.com/thank-you.html after payment (verifies PAY-02)
  </action>
  <verify>User confirms all sections display correctly, buy buttons work, footer links navigate to legal pages, and Stripe redirects are configured.</verify>
  <done>Complete front-end verified by user. PageSpeed mobile LCP < 2s confirmed. Stripe redirects configured and purchase-to-redirect tested. All PAGE-01 through PAGE-14 and PAY-02/PAY-04 requirements satisfied. Resume signal: "approved" or issues described.</done>
</task>

</tasks>

<verification>
1. output.css recompiled — all new Tailwind classes render correctly
2. og-image.png exists and will display in social previews
3. All 5 HTML pages render on desktop and mobile
4. Stripe buy buttons open correct checkout pages
5. Stripe dashboard redirects configured to thank-you.html
6. Footer links navigate to legal pages
</verification>

<success_criteria>
- output.css contains all classes used across all HTML pages
- og-image.png is 1200x630px PNG at project root
- User has verified the complete site works end-to-end
- Stripe redirects are configured in dashboard
- All PAGE-01 through PAGE-14 requirements satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/04-front-end-build/04-04-SUMMARY.md`
</output>
