---
phase: 02-infrastructure
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - .gitignore
  - src/input.css
  - thank-you.html
  - output.css
  - index.html
autonomous: true

must_haves:
  truths:
    - "Tailwind v4 standalone CLI compiles output.css from src/input.css without npm"
    - "output.css exists in the repo root and is committed"
    - "index.html loads output.css (not the Tailwind CDN script)"
    - "Alpine.js v3 script tag with defer is in index.html <head>"
    - "thank-you.html exists as a valid stub page"
    - ".gitignore excludes the tailwindcss binary but NOT output.css"
  artifacts:
    - path: "src/input.css"
      provides: "Tailwind v4 CSS source"
      contains: "@import \"tailwindcss\""
    - path: "output.css"
      provides: "Compiled CSS served by Cloudflare Pages"
      min_lines: 10
    - path: "thank-you.html"
      provides: "Redirect target for Stripe Payment Links"
      contains: "thank-you"
    - path: "index.html"
      provides: "Landing page linking compiled CSS and Alpine"
      contains: "output.css"
    - path: ".gitignore"
      provides: "Excludes Tailwind binary from git"
      contains: "tailwindcss"
  key_links:
    - from: "index.html"
      to: "output.css"
      via: "<link rel=\"stylesheet\" href=\"output.css\">"
      pattern: "href=\"output.css\""
    - from: "index.html"
      to: "alpine.js CDN"
      via: "script tag in <head> with defer"
      pattern: "defer.*alpinejs|alpinejs.*defer"
    - from: "output.css"
      to: "src/input.css"
      via: "Tailwind CLI compilation"
      pattern: "@import.*tailwindcss"
---

<objective>
Set up the complete local toolchain: download Tailwind v4 standalone CLI, create the CSS source file, compile output.css, update index.html to use compiled CSS and Alpine.js CDN, and create a stub thank-you.html.

Purpose: This is the autonomous foundation work that must exist before any human interaction (GitHub, Cloudflare, Stripe). Output.css is committed so Cloudflare Pages has no build step requirement.
Output: .gitignore, src/input.css, output.css (committed), thank-you.html stub, index.html updated.
</objective>

<execution_context>
@/Users/wilfredshammah/.claude/get-shit-done/workflows/execute-plan.md
@/Users/wilfredshammah/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-infrastructure/02-RESEARCH.md
@index.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Scaffold .gitignore, src/input.css, and thank-you.html stub</name>
  <files>
    .gitignore
    src/input.css
    thank-you.html
  </files>
  <action>
Create three files:

**.gitignore** — Add entries for the Tailwind binary (platform-specific, not for version control) but intentionally do NOT ignore output.css (it must be committed so Cloudflare Pages has a static file to serve):
```
# Tailwind CLI binary (platform-specific — regenerate locally)
tailwindcss
tailwindcss-macos-arm64
tailwindcss-macos-x64
tailwindcss-linux-x64
tailwindcss-linux-arm64
tailwindcss-windows-x64.exe
```

**src/input.css** — Tailwind v4 source file. The v4 syntax uses a single @import instead of three @tailwind directives. Also define the custom brand and dark theme tokens used in index.html to preserve the existing color palette:
```css
@import "tailwindcss";

@theme {
  --color-brand-50: oklch(0.97 0.03 212);
  --color-brand-100: oklch(0.94 0.06 212);
  --color-brand-500: oklch(0.65 0.19 212);
  --color-brand-600: oklch(0.57 0.19 212);
  --color-brand-700: oklch(0.50 0.18 212);
  --color-brand-900: oklch(0.30 0.12 212);
  --color-dark-800: oklch(0.14 0.01 270);
  --color-dark-900: oklch(0.10 0.01 270);
}
```

**thank-you.html** — Minimal valid stub page. This exists solely so the Stripe Payment Link redirect URL resolves. Full content is built in Phase 4. Use Tailwind classes from output.css and a link back to index:
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thank You — ContentKit AI</title>
  <link rel="stylesheet" href="output.css">
</head>
<body class="bg-dark-900 text-white min-h-screen flex items-center justify-center">
  <div class="text-center max-w-lg mx-auto px-6">
    <h1 class="text-3xl font-bold mb-4">Thank you for your purchase!</h1>
    <p class="text-gray-400 mb-6">Check your email — your download links are on their way.</p>
    <a href="index.html" class="text-brand-500 hover:text-brand-400">← Back to ContentKit AI</a>
  </div>
</body>
</html>
```
  </action>
  <verify>
Run from /Users/wilfredshammah/Desktop/dp:
```bash
cat .gitignore | grep tailwindcss
cat src/input.css | grep "@import"
cat thank-you.html | grep "thank"
```
All three commands should return matching lines.
  </verify>
  <done>
.gitignore contains "tailwindcss" entry. src/input.css contains `@import "tailwindcss"` and `@theme` block. thank-you.html exists as a valid HTML stub with output.css link.
  </done>
</task>

<task type="auto">
  <name>Task 2: Download Tailwind v4 CLI binary and compile output.css</name>
  <files>
    output.css
  </files>
  <action>
Download the Tailwind v4 standalone CLI binary for macOS arm64 (the current machine's platform per research), make it executable, compile output.css, then verify output.

Step 1 — Download and install binary (run from /Users/wilfredshammah/Desktop/dp):
```bash
curl -sLO https://github.com/tailwindlabs/tailwindcss/releases/latest/download/tailwindcss-macos-arm64
chmod +x tailwindcss-macos-arm64
mv tailwindcss-macos-arm64 tailwindcss
```

Step 2 — Compile with minify flag for production (since output.css is committed and served as-is):
```bash
./tailwindcss --input src/input.css --output output.css --minify
```

Step 3 — Verify the binary is gitignored. The binary is platform-specific and should not be committed. output.css IS committed (it is the deployable artifact).

**Critical:** If the compile output is unexpectedly small (under 5KB), the scanner may not have found index.html. Add `@source "./";` as the second line of src/input.css (after the @import) to force scanning the current directory tree, then recompile. Do not skip this check.

**Pitfall from research:** Tailwind v4 respects .gitignore. Since index.html is not gitignored, it should be scanned automatically. But if classes are missing post-deploy, this is the fix.
  </action>
  <verify>
```bash
ls -lh /Users/wilfredshammah/Desktop/dp/output.css
wc -c /Users/wilfredshammah/Desktop/dp/output.css
```
output.css must exist and be larger than 5KB (a reasonable compiled Tailwind output with custom theme tokens and utility classes used in index.html).
  </verify>
  <done>
output.css exists in repo root, is larger than 5KB, and contains minified CSS. The tailwindcss binary exists locally but is listed in .gitignore.
  </done>
</task>

<task type="auto">
  <name>Task 3: Update index.html — swap Tailwind CDN for compiled CSS, add Alpine.js</name>
  <files>
    index.html
  </files>
  <action>
Replace the Tailwind CDN script and inline config in index.html with a link to output.css, and add Alpine.js v3 from jsDelivr CDN.

**What to remove from `<head>`:**
```html
<script src="https://cdn.tailwindcss.com"></script>
<script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          brand: { 50: '#f0f9ff', 100: '#e0f2fe', 500: '#0ea5e9', 600: '#0284c7', 700: '#0369a1', 900: '#0c4a6e' },
          dark: { 800: '#1e1e2e', 900: '#11111b' }
        }
      }
    }
  }
</script>
```

**What to add to `<head>` (before `<style>`):**
```html
<link rel="stylesheet" href="output.css">
<script defer src="https://cdn.jsdelivr.net/npm/[email protected]/dist/cdn.min.js"></script>
```

**Gradient class rename — Tailwind v4 breaking change from research:**
Scan index.html for `bg-gradient-to-` occurrences and rename to `bg-linear-to-`. Run:
```bash
grep -n "bg-gradient-to-" /Users/wilfredshammah/Desktop/dp/index.html
```
For each match, rename `bg-gradient-to-r` → `bg-linear-to-r`, `bg-gradient-to-b` → `bg-linear-to-b`, etc.

**Alpine defer placement note:** The `<script defer>` tag for Alpine MUST be in `<head>`, not at the bottom of `<body>`. Defer loads after DOM is ready. Without defer, Alpine silently fails to initialize.

**Do NOT remove** the existing `<style>` block containing `.gradient-text`, `.glow`, `.fade-in`, `.pulse-border` — these are custom CSS animations not covered by Tailwind utilities.
  </action>
  <verify>
```bash
grep -n "cdn.tailwindcss.com" /Users/wilfredshammah/Desktop/dp/index.html
grep -n "output.css" /Users/wilfredshammah/Desktop/dp/index.html
grep -n "alpinejs" /Users/wilfredshammah/Desktop/dp/index.html
grep -n "bg-gradient-to-" /Users/wilfredshammah/Desktop/dp/index.html
```
Expected: line 1 returns nothing (CDN removed), line 2 returns the link tag, line 3 returns the Alpine script tag, line 4 returns nothing (all renamed).
  </verify>
  <done>
index.html loads output.css via `<link>`, loads Alpine.js v3 via `<script defer>` in `<head>`, has no `cdn.tailwindcss.com` reference, and has no `bg-gradient-to-` classes (all renamed to `bg-linear-to-`).
  </done>
</task>

</tasks>

<verification>
From /Users/wilfredshammah/Desktop/dp run:

1. Verify no Tailwind CDN script in index.html:
   `grep "cdn.tailwindcss.com" index.html` → should return nothing

2. Verify output.css is present and substantial:
   `ls -lh output.css` → should show file > 5KB

3. Verify Alpine is present with defer:
   `grep "defer.*alpinejs" index.html` → should return the script tag

4. Verify .gitignore excludes binary:
   `grep "tailwindcss" .gitignore` → should return the entry

5. Verify thank-you.html exists:
   `ls thank-you.html` → file exists

6. Open index.html in browser to confirm visual rendering is correct (no broken styles from the CDN → compiled CSS switch).
</verification>

<success_criteria>
- output.css exists, is minified, and is > 5KB
- index.html references output.css (not cdn.tailwindcss.com)
- Alpine.js v3 script tag present in index.html head with defer attribute
- thank-you.html exists as a valid HTML stub
- .gitignore excludes the tailwindcss binary
- No bg-gradient-to- classes remain in index.html
- All 5 files committed to git
</success_criteria>

<output>
After completion, create `/Users/wilfredshammah/Desktop/dp/.planning/phases/02-infrastructure/02-01-SUMMARY.md`
</output>
