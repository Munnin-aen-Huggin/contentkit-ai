---
phase: 02-infrastructure
plan: "02"
type: execute
wave: 2
depends_on: ["02-01"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "GitHub repository exists and contains the project files"
    - "Cloudflare Pages project is connected to the GitHub repo"
    - "Pushing a commit to GitHub triggers an automatic deploy to Cloudflare Pages"
    - "The Cloudflare Pages URL resolves and serves index.html without a 404 error"
  artifacts:
    - path: "GitHub repository"
      provides: "Remote git host that triggers Cloudflare deploys"
      contains: "index.html, output.css, thank-you.html"
    - path: "Cloudflare Pages project"
      provides: "Live deploy URL (*.pages.dev)"
      contains: "Framework: None, Build command: exit 0, Output directory: /"
  key_links:
    - from: "GitHub main branch"
      to: "Cloudflare Pages deploy"
      via: "git push triggers automatic build"
      pattern: "push to main → deploy in 30-60s"
    - from: "Cloudflare Pages"
      to: "index.html"
      via: "output directory set to / (repo root)"
      pattern: "*.pages.dev serves index.html"
---

<objective>
Connect the local git repository to GitHub and wire Cloudflare Pages for automatic push-to-deploy. Verify the pipeline works end-to-end with a test commit.

Purpose: The Cloudflare Pages URL is a prerequisite for Plan 02-03 (Stripe Payment Links need a real redirect URL). This plan cannot proceed until Plan 02-01 is complete — output.css and all committed files must exist before pushing to GitHub.
Output: A live *.pages.dev URL serving the site, auto-deploying on every git push.
</objective>

<execution_context>
@/Users/wilfredshammah/.claude/get-shit-done/workflows/execute-plan.md
@/Users/wilfredshammah/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-infrastructure/02-RESEARCH.md
@.planning/phases/02-infrastructure/02-01-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Create GitHub repository and push local repo</name>
  <action>
Human action required — Claude cannot authenticate to GitHub to create a repository.

Create a new GitHub repository and push the existing local git repository to it.

Steps:
1. Go to https://github.com/new
2. Create a new repository:
   - Repository name: `dp` (or `contentkit-ai` — your preference)
   - Visibility: Private (you can make it public later; private prevents scrapers from accessing your content)
   - Do NOT initialize with README, .gitignore, or license (the local repo already has these)
3. After creation, GitHub shows "push an existing repository" instructions. Run those commands from /Users/wilfredshammah/Desktop/dp:
   ```bash
   git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO_NAME.git
   git branch -M main
   git push -u origin main
   ```
4. Verify: Refresh the GitHub repository page and confirm all files appear (index.html, output.css, downloads/, etc.)
  </action>
  <verify>Visit the GitHub repository URL and confirm index.html, output.css, thank-you.html, and downloads/ directory are all visible.</verify>
  <done>GitHub repository exists and all committed files are visible on the repository page.</done>
  <resume-signal>Type "pushed" when the GitHub repository is live and all files are visible, or describe any issues.</resume-signal>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 2: Connect Cloudflare Pages to GitHub repository</name>
  <action>
Human action required — Claude cannot authenticate to Cloudflare Dashboard.

Create a Cloudflare Pages project connected to the GitHub repository. Use the exact build settings below — getting these wrong causes silent 404 errors even when the deploy shows success.

Steps:
1. Go to https://dash.cloudflare.com → Workers & Pages → Pages tab → Create a project
2. Select Connect to Git → GitHub → authorize Cloudflare if prompted
3. Select your repository from the list → Begin setup
4. Configure build settings EXACTLY as follows:
   - Framework preset: None
   - Build command: exit 0
   - Build output directory: /
   - Root directory: (leave blank)
   - Production branch: main

   WHY `exit 0` instead of blank: Cloudflare requires a build command to mark the deploy successful. An empty field causes deploy failures.
   WHY `/` not blank: Blank output directory causes 404 errors even on a successful deploy. `/` tells Cloudflare to serve from the repo root where index.html lives.

5. Click Save and Deploy
6. Wait 30-60 seconds for the initial deploy to complete
7. Click the *.pages.dev URL that appears in the Cloudflare Pages dashboard
8. Confirm: The ContentKit AI landing page loads (not a 404 or blank page)

If you see a 404: The most common cause is the build output directory not being set to `/`. Edit the project settings and re-deploy.
  </action>
  <verify>Visit the *.pages.dev URL that Cloudflare assigned. It should return the ContentKit AI landing page (not a 404 or blank page).</verify>
  <done>A *.pages.dev URL serves the ContentKit AI landing page. Cloudflare Pages deployment dashboard shows a successful deploy.</done>
  <resume-signal>Type the Cloudflare Pages URL (e.g., "https://contentkit-ai.pages.dev") when the site is live and loading correctly, or describe any issues.</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify push-to-deploy pipeline with a test commit</name>
  <action>
Run a test commit to confirm GitHub push triggers automatic Cloudflare Pages deploy.

From /Users/wilfredshammah/Desktop/dp:
```bash
echo "<!-- deploy test -->" >> index.html
git add index.html
git commit -m "test: verify push-to-deploy pipeline"
git push
```

Then watch the Cloudflare Pages dashboard → your project → Deployments tab to confirm a new deployment appears and reaches Success status within 60 seconds.

After confirming, revert the test change:
```bash
git revert HEAD --no-edit
git push
```
  </action>
  <verify>
Go to the Cloudflare Pages dashboard → project → Deployments tab. Confirm:
1. A new deployment appeared after the test commit push
2. The deployment reached Success status within 60 seconds
3. The *.pages.dev URL still serves the ContentKit AI page correctly after the revert push
  </verify>
  <done>Two deployments visible in Cloudflare dashboard (test commit + revert). Site loads at the pages.dev URL. Push-to-deploy pipeline is confirmed working end-to-end.</done>
  <resume-signal>Type "verified" when push-to-deploy is confirmed working and you have the live pages.dev URL, or describe any issues.</resume-signal>
</task>

</tasks>

<verification>
Pipeline verification:
1. GitHub repo exists and all local commits are visible
2. Cloudflare Pages project is connected to the GitHub repo
3. Build settings: Framework=None, Build command=`exit 0`, Output directory=`/`
4. The `*.pages.dev` URL returns HTTP 200 and serves the ContentKit AI landing page
5. A push to GitHub triggers a Cloudflare deploy within 60 seconds
6. Record the Cloudflare Pages URL — it is required for Plan 02-03 (Stripe Payment Link redirect URL)
</verification>

<success_criteria>
- GitHub repository live with all Phase 1 and Phase 2 (Plan 01) files
- Cloudflare Pages project connected, build settings correct
- Live *.pages.dev URL serving index.html without 404
- Push-to-deploy verified: a commit push triggers automatic redeploy
- Cloudflare Pages URL documented (for Stripe Payment Links in Plan 02-03)
</success_criteria>

<output>
After completion, create `/Users/wilfredshammah/Desktop/dp/.planning/phases/02-infrastructure/02-02-SUMMARY.md`

Include the Cloudflare Pages URL in the summary — Plan 02-03 requires it.
</output>
